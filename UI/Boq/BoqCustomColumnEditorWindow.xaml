<Window
    x:Class="Pulse.UI.Boq.BoqCustomColumnEditorWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:ui="clr-namespace:Pulse.UI"
    xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
    Title="Pulse â€” Custom Column"
    Width="440"
    Height="460"
    MinWidth="360"
    MinHeight="380"
    AllowsTransparency="True"
    Background="Transparent"
    WindowStyle="None"
    WindowStartupLocation="CenterOwner"
    mc:Ignorable="d">

    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/MaterialDesignThemes.Wpf;component/Themes/MaterialDesignTheme.Dark.xaml" />
                <ResourceDictionary Source="pack://application:,,,/Pulse;component/UI/Themes/ElementStyles.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Window.Resources>

    <Grid Background="Transparent">

        <!-- Frosted-glass edge glow -->
        <Border BorderBrush="{DynamicResource BorderBrush}"
                BorderThickness="2"
                CornerRadius="10"
                Opacity="0.7"
                SnapsToDevicePixels="True">
            <Border.Effect>
                <BlurEffect KernelType="Gaussian" Radius="2" />
            </Border.Effect>
        </Border>

        <!-- Main surface -->
        <Border Margin="2"
                Background="{DynamicResource PrimaryBackgroundBrush}"
                CornerRadius="10">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="30" />
                    <RowDefinition Height="*"  />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <!-- Title bar -->
                <ui:TitleBar Grid.Row="0" IsMinimizeVisible="False" />

                <!-- Content -->
                <ScrollViewer Grid.Row="1"
                              VerticalScrollBarVisibility="Auto"
                              Padding="20,14,20,0">
                    <StackPanel>

                        <!-- Header -->
                        <TextBlock Text="COLUMN HEADER"
                                   Style="{StaticResource FieldLabelStyle}"
                                   Margin="0,0,0,4" />
                        <TextBox x:Name="HeaderBox"
                                 Background="{DynamicResource SecondaryBackgroundBrush}"
                                 Foreground="{DynamicResource ForegroundBrush}"
                                 BorderBrush="{DynamicResource BorderBrush}"
                                 CaretBrush="{DynamicResource ForegroundBrush}"
                                 BorderThickness="1" Padding="6,4"
                                 Margin="0,0,0,14" />

                        <Border Height="1" Background="{DynamicResource BorderBrush}" Margin="0,0,0,14" />

                        <!-- Kind -->
                        <TextBlock Text="COLUMN TYPE"
                                   Style="{StaticResource FieldLabelStyle}"
                                   Margin="0,0,0,4" />
                        <ComboBox x:Name="KindBox"
                                  Margin="0,0,0,14"
                                  SelectionChanged="KindBox_SelectionChanged" />

                        <!-- Delimiter -->
                        <TextBlock x:Name="DelimiterLabel"
                                   Text="DELIMITER"
                                   Style="{StaticResource FieldLabelStyle}"
                                   Margin="0,0,0,4" />
                        <TextBox x:Name="DelimiterBox"
                                 Background="{DynamicResource SecondaryBackgroundBrush}"
                                 Foreground="{DynamicResource ForegroundBrush}"
                                 BorderBrush="{DynamicResource BorderBrush}"
                                 CaretBrush="{DynamicResource ForegroundBrush}"
                                 BorderThickness="1" Padding="6,4"
                                 Margin="0,0,0,14" />

                        <Border Height="1" Background="{DynamicResource BorderBrush}" Margin="0,0,0,14" />

                        <!-- Source fields -->
                        <TextBlock Text="SOURCE FIELDS"
                                   Style="{StaticResource FieldLabelStyle}"
                                   Margin="0,0,0,10" />
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="36" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <DockPanel Grid.Column="0">
                                <TextBlock DockPanel.Dock="Top" Text="Available"
                                           Foreground="{DynamicResource IconForegroundBrush}"
                                           FontSize="10" Margin="0,0,0,4" />
                                <ListBox x:Name="AvailableList"
                                         Background="{DynamicResource SecondaryBackgroundBrush}"
                                         Foreground="{DynamicResource ForegroundBrush}"
                                         BorderBrush="{DynamicResource BorderBrush}"
                                         BorderThickness="1" Height="120"
                                         MouseDoubleClick="AvailableList_DoubleClick" />
                            </DockPanel>

                            <StackPanel Grid.Column="1" VerticalAlignment="Center" Margin="4,0">
                                <Button ToolTip="Add selected"
                                        Click="AddSource_Click"
                                        Style="{StaticResource PulseActionButtonStyle}"
                                        Padding="4" Margin="0,0,0,4">
                                    <materialDesign:PackIcon Kind="ChevronRight" Width="14" Height="14" />
                                </Button>
                                <Button ToolTip="Remove selected"
                                        Click="RemoveSource_Click"
                                        Style="{StaticResource PulseActionButtonStyle}"
                                        Padding="4">
                                    <materialDesign:PackIcon Kind="ChevronLeft" Width="14" Height="14" />
                                </Button>
                            </StackPanel>

                            <DockPanel Grid.Column="2">
                                <TextBlock DockPanel.Dock="Top" Text="Selected (in order)"
                                           Foreground="{DynamicResource IconForegroundBrush}"
                                           FontSize="10" Margin="0,0,0,4" />
                                <ListBox x:Name="SelectedList"
                                         Background="{DynamicResource SecondaryBackgroundBrush}"
                                         Foreground="{DynamicResource ForegroundBrush}"
                                         BorderBrush="{DynamicResource BorderBrush}"
                                         BorderThickness="1" Height="120"
                                         MouseDoubleClick="SelectedList_DoubleClick" />
                            </DockPanel>
                        </Grid>

                    </StackPanel>
                </ScrollViewer>

                <!-- Footer -->
                <Border Grid.Row="2"
                        Background="{DynamicResource SecondaryBackgroundBrush}"
                        BorderBrush="{DynamicResource BorderBrush}"
                        BorderThickness="0,1,0,0"
                        CornerRadius="0,0,8,8"
                        Padding="16,8">
                    <StackPanel Orientation="Horizontal"
                                HorizontalAlignment="Right">
                        <Button IsCancel="True"
                                Click="Cancel_Click"
                                Style="{StaticResource PulseActionButtonStyle}"
                                Margin="0,0,8,0">
                            <TextBlock Text="Cancel" FontSize="11" />
                        </Button>
                        <Button IsDefault="True"
                                Click="OK_Click"
                                Style="{StaticResource PulsePrimaryButtonStyle}">
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="Check" Width="14" Height="14"
                                                         VerticalAlignment="Center" Margin="0,0,4,0" />
                                <TextBlock Text="OK" FontSize="11" VerticalAlignment="Center" />
                            </StackPanel>
                        </Button>
                    </StackPanel>
                </Border>
            </Grid>
        </Border>
    </Grid>
</Window>
